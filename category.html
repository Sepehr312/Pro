<!DOCTYPE html>
<html lang="fa">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>افزودن دسته بندی</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
  <style>
    .category-card {
  text-align: center;
  border-radius: 20px;
  border: 2px solid #3a9943;
  height: 400px; /* Adjusted height */
  width: 250px;
  margin: 10px;
  position: relative;
  overflow: hidden;
  padding: 5px;
}
input {
  direction: rtl;
}
.upload-box {
  width: 100%;
  height: 70%; /* Adjusted height */
  border: 2px dashed #3a9943;
  border-radius: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  position: relative;
  background-color: #f8f9fa;
}

.upload-box img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: none;
}

.upload-box input[type="file"] {
  opacity: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  cursor: pointer;
}

.upload-box .icon {
  font-size: 36px;
  color: #3a9943;
  margin-bottom: 10px;
}

.form-control {
  margin-top: 10px;
}

.extra-inputs {
  width: 100%;
  margin-top: 10px;
  direction:rtl ;
}

.action-buttons {
  position: absolute;
  top: -40px;
  top: 10px;
  display: flex;
  flex-direction: column;
  transition: right 0.3s ease;
}

.action-buttons button {
  width: 35px;
  height: 35px;
  margin-bottom: 5px;
  border-radius: 5px;
  border: 2px solid transparent;
  background-color: transparent;
  color: #3a9943;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background-color 0.3s, color 0.3s;
}
.category-card:hover .action-buttons {
  top: 10px;
}

.action-buttons button.delete:hover {
  background-color: #dc3545;
  color: #fff;
}

.action-buttons button.confirm:hover {
  background-color: #198754;
  color: #fff;
}

.action-buttons button.delete {
  background-color: rgb(255, 255, 255);
}

.action-buttons button.confirm {
  background-color: rgb(255, 255, 255);
}
.title{
  position: absolute;
  top: 80%; /* تنظیم مکان محتوا در وسط ارتفاع */
  right: auto;
  width: 90%;
}
  </style>
  </head>
  <body class="bg-light">
    <div class="container mt-5">
      <h2 class="d-flex justify-content-center mb-4">تنظیمات دسته بندی</h2>
      <div class="text-center mb-4">
        <button id="addCategoryBtn" class="btn btn-success">
          افزودن دسته بندی
        </button>
      </div>
      <div class="row" id="categoryContainer">
        <!-- کارت‌ها به صورت خودکار اضافه خواهند شد -->
      </div>
    </div>

    <script>
        document
  .getElementById("addCategoryBtn")
  .addEventListener("click", function () {
    const cardHtml = `
        <div class="col-lg-3 col-md-4 col-sm-6 d-flex justify-content-center">
            <div class="category-card">
                <div class="upload-box">
                    <img id="uploadedImage" src="#" alt="عکس آپلود شده">
                    <input type="file" class="imageInput" accept="image/*">
                    <div id="placeholder" class="text-center">
                        <i class="fas fa-image icon"></i>
                    </div>
                    <div class="title">
                    <input type="text" class="form-control" id="title" placeholder="عنوان دسته بندی">
                    </div>
                    <div class="action-buttons"> 
                        <button type="button" class="btn confirm">
                            <i class="fas fa-check"></i>
                        </button>
                        <button type="button" class="btn delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
                <div class="extra-inputs">
                    <input type="text" class="form-control mt-2" placeholder="نوشته دکمه">
                    <input type="text" class="form-control mt-2" placeholder="لینک دکمه">
                </div>
            </div>
        </div>
    `;
    const container = document.getElementById("categoryContainer");
    container.insertAdjacentHTML("beforeend", cardHtml);

    // اضافه کردن رویداد برای هر آپلود باکس تازه اضافه شده
    const imageInputs = container.querySelectorAll(".imageInput");
    const newImageInput = imageInputs[imageInputs.length - 1];
    newImageInput.addEventListener("change", function (event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          const uploadedImage = event.target
            .closest(".upload-box")
            .querySelector("img");
          const placeholder = event.target
            .closest(".upload-box")
            .querySelector("#placeholder");
          uploadedImage.style.display = "block";
          uploadedImage.src = e.target.result;
          placeholder.style.display = "none";
        };
        reader.readAsDataURL(file);
      }
    });
  });

// Initial cards
for (let i = 0; i < 4; i++) {
  document.getElementById("addCategoryBtn").click();
}

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
